<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="generator" content="PML 2.1.0 (www.pml-lang.dev)" />
        <title>Basic PDML Specification</title>
        <link rel="stylesheet" href="css/pml-default.css">
        <link rel="stylesheet" href="css/pml-print-default.css" media="print">

    </head>
    <body>

        <div class="pml-doc-wrapper">
            <header class="pml-doc-header">
            </header>
            <div class="pml-doc-content">
                <aside class="pml-doc-left">
                    <nav class="pml-toc">
                        <h2 class="pml-toc-title">Table of Contents</h2>
                        <div class="pml-toc-tree" id="TOCTree">
                            <ul>
                                <li class="pml-toc-leaf-node"><a href="#ch__1">Introduction</a></li>
                                <li class="pml-toc-branch-node">
                                    <details>
                                        <summary><a href="#ch__7">Document Structure</a></summary>
                                        <ul>
                                            <li class="pml-toc-leaf-node"><a href="#ch__2">Node</a></li>
                                            <li class="pml-toc-leaf-node"><a href="#ch__3">Name</a></li>
                                            <li class="pml-toc-leaf-node"><a href="#ch__4">Separator</a></li>
                                            <li class="pml-toc-leaf-node"><a href="#ch__5">Child Node</a></li>
                                            <li class="pml-toc-leaf-node"><a href="#ch__6">Empty Node</a></li>
                                        </ul>
                                    </details>
                                </li>
                                <li class="pml-toc-leaf-node"><a href="#escape_rules">Escape Characters</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__8">Whitespace</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__9">New Lines</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__10">Encoding</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__11">Grammar</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__12">Examples</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__13">Website</a></li>
                                <li class="pml-toc-leaf-node"><a href="#ch__14">Source Code</a></li>
                            </ul>
                        </div>
                    </nav>
                </aside>
                <article class="pml-doc-text">
                    <h1 class="pml-doc-title">Basic PDML Specification</h1>
                    <p class="pml-paragraph">Author: Christian Neumanns</p>
                    <p class="pml-paragraph">Published: 2021-11-16</p>
                    <section id="ch__1" class="pml-chapter">
                        <h2 class="pml-chapter-title">Introduction</h2>
                        <p class="pml-paragraph">The <i class="pml-italic">Practical Data and Markup Language</i> (PDML) is a specification of a text format to store data.</p>
                        <p class="pml-paragraph">A distinction is made between <i class="pml-italic">basic PDML</i> and <i class="pml-italic">extensions</i>. <i class="pml-italic">Basic PDML</i> is the minimum needed to store data. Extensions are optional features to make PDML more practical.</p>
                        <p class="pml-paragraph">This document only covers <i class="pml-italic">basic PDML</i>.</p>
                    </section>
                    <section id="ch__7" class="pml-chapter">
                        <h2 class="pml-chapter-title">Document Structure</h2>
                        <p class="pml-paragraph">A <i class="pml-italic">PDML document</i> is a tree of nodes.</p>
                        <p class="pml-paragraph">The syntax for a node is defined as follows (in EBNF):</p>
                        <pre class="pml-code"><code>&quot;[&quot; name ( separator ? child_node + ) ? &quot;]&quot;</code></pre>
                        <section id="ch__2" class="pml-chapter">
                            <h3 class="pml-chapter-title">Node</h3>
                            <p class="pml-paragraph">A <i class="pml-italic">node</i> is enclosed by a pair of square brackets: <code class="pml-inline-code">[...]</code>. A node starts with <code class="pml-inline-code">[</code> and ends with <code class="pml-inline-code">]</code>.</p>
                            <p class="pml-paragraph">Each document has one root node.</p>
                        </section>
                        <section id="ch__3" class="pml-chapter">
                            <h3 class="pml-chapter-title">Name</h3>
                            <p class="pml-paragraph">Each node has a <i class="pml-italic">name</i>.</p>
                            <p class="pml-paragraph">A node name must match the regex <code class="pml-inline-code">[a-zA-Z_][a-zA-Z1-9_-\.]*</code>. This means that a name starts with a letter or an underscore (<code class="pml-inline-code">_</code>), optionally followed by any number of letters, digits, underscores (<code class="pml-inline-code">_</code>), hyphens (<code class="pml-inline-code">-</code>), or dots (<code class="pml-inline-code">.</code>).</p>
                            <p class="pml-paragraph">Here are some examples of valid node names:</p>
                            <pre class="pml-code"><code>color
Index_12
_ID_12.5-a</code></pre>
                            <p class="pml-paragraph">A node name does not need to be unique. Different nodes in a tree can have the same name.</p>
                        </section>
                        <section id="ch__4" class="pml-chapter">
                            <h3 class="pml-chapter-title">Separator</h3>
                            <p class="pml-paragraph">The <i class="pml-italic">separator</i> separates the node's name from its content.</p>
                            <p class="pml-paragraph">The separator is a single whitespace character. The following whitespace characters are allowed:</p>
                            <table class="pml-table">
                                <thead class="pml-table-header">
                                    <tr><th class="pml-table-header-cell">Name</th><th class="pml-table-header-cell">C-style syntax</th><th class="pml-table-header-cell">Unicode</th></tr>
                                </thead>
                                <tbody class="pml-table-body">
                                    <tr><td class="pml-table-body-cell">Space</td><td class="pml-table-body-cell">&quot; &quot;</td><td class="pml-table-body-cell">U+0020</td></tr>
                                    <tr><td class="pml-table-body-cell">Tab</td><td class="pml-table-body-cell">&quot;\t&quot;</td><td class="pml-table-body-cell">U+0009</td></tr>
                                    <tr><td class="pml-table-body-cell">Unix new line</td><td class="pml-table-body-cell">&quot;\n&quot;</td><td class="pml-table-body-cell">U+000A</td></tr>
                                    <tr><td class="pml-table-body-cell">Windows new line</td><td class="pml-table-body-cell">&quot;\r\n&quot;</td><td class="pml-table-body-cell">U+000D U+000A</td></tr>
                                </tbody>
                            </table>
                            <p class="pml-paragraph">The separator is required if the first child node is text. Example:</p>
                            <pre class="pml-code"><code>[color green]</code></pre>
                            <p class="pml-paragraph">The separator is optional if the first child node is a node. Hence this code:</p>
                            <pre class="pml-code"><code>[b [i huge]]</code></pre>
                            <p class="pml-paragraph">... can also be written as:</p>
                            <pre class="pml-code"><code>[b[i huge]]</code></pre>
                        </section>
                        <section id="ch__5" class="pml-chapter">
                            <h3 class="pml-chapter-title">Child Node</h3>
                            <p class="pml-paragraph">A node can optionally have any number of child nodes.</p>
                            <p class="pml-paragraph">A <i class="pml-italic">child node</i> can be text (a sequence of Unicode characters) or another node (with optional child nodes too).</p>
                            <p class="pml-paragraph">Examples:</p>
                            <ul class="pml-list">
                                <li class="pml-list-element">
                                    <p class="pml-paragraph">Node with one text child:</p>
                                    <pre class="pml-code"><code>[color light green]</code></pre>
                                    <p class="pml-paragraph">The node's name is <code class="pml-inline-code">color</code>. The node's single child node is the text <code class="pml-inline-code">light green</code>.</p>
                                </li>
                                <li class="pml-list-element">
                                    <p class="pml-paragraph">Node with child node:</p>
                                    <pre class="pml-code"><code>[config [color light green]]</code></pre>
                                    <p class="pml-paragraph">The node <code class="pml-inline-code">config</code> has one child node. The child node's name is <code class="pml-inline-code">color</code>, its text is <code class="pml-inline-code">light green</code>.</p>
                                </li>
                                <li class="pml-list-element">
                                    <p class="pml-paragraph">Tree of nodes:</p>
                                    <pre class="pml-code"><code>[config
    [color light green]
    [size
        [width 200]
        [height 100]
    ]
]</code></pre>
                                </li>
                                <li class="pml-list-element">
                                    <p class="pml-paragraph">Node containing a mixture of text and nodes (markup code):</p>
                                    <pre class="pml-code"><code>[p We can write words in [i italic], [b bold], or [b[i bold and italic]].]</code></pre>
                                </li>
                            </ul>
                        </section>
                        <section id="ch__6" class="pml-chapter">
                            <h3 class="pml-chapter-title">Empty Node</h3>
                            <p class="pml-paragraph">If a node has no child nodes, it is called an <i class="pml-italic">empty node</i>.</p>
                            <p class="pml-paragraph">Example:</p>
                            <pre class="pml-code"><code>[new_line]</code></pre>
                        </section>
                    </section>
                    <section id="escape_rules" class="pml-chapter">
                        <h2 class="pml-chapter-title">Escape Characters</h2>
                        <p class="pml-paragraph">As seen already, <code class="pml-inline-code">[</code> and <code class="pml-inline-code">]</code> are used as node delimiters. Therefore these two characters must be escaped when they are used in text nodes.</p>
                        <p class="pml-paragraph">A backslash (<code class="pml-inline-code">\</code>) is used as escape character (as in C-like programming languages). Therefore the backslash must itself be escaped too.</p>
                        <p class="pml-paragraph">The final rule is simple: Characters <code class="pml-inline-code">[</code>, <code class="pml-inline-code">]</code>, and <code class="pml-inline-code">\</code> must be preceded by <code class="pml-inline-code">\</code> when they are used in text nodes, as shown in the following table:</p>
                        <table class="pml-table">
                            <thead class="pml-table-header">
                                <tr><th class="pml-table-header-cell">Character</th><th class="pml-table-header-cell">Escape sequence</th></tr>
                            </thead>
                            <tbody class="pml-table-body">
                                <tr><td class="pml-table-body-cell">[</td><td class="pml-table-body-cell">\[</td></tr>
                                <tr><td class="pml-table-body-cell">]</td><td class="pml-table-body-cell">\]</td></tr>
                                <tr><td class="pml-table-body-cell">\</td><td class="pml-table-body-cell">\\</td></tr>
                            </tbody>
                        </table>
                        <p class="pml-paragraph">Example:</p>
                        <p class="pml-paragraph">Suppose node <code class="pml-inline-code">foo</code> contains the text: <code class="pml-inline-code">Characters [, ], and \ must be escaped.</code></p>
                        <p class="pml-paragraph">This would be written as:</p>
                        <pre class="pml-code"><code>[foo Characters \[, \], and \\ must be escaped.]</code></pre>
                    </section>
                    <section id="ch__8" class="pml-chapter">
                        <h2 class="pml-chapter-title">Whitespace</h2>
                        <p class="pml-paragraph">There are no whitespace handling rules defined in basic PDML.</p>
                        <p class="pml-paragraph">Whitespace is preserved when a PDML document is parsed.</p>
                        <p class="pml-paragraph">Consider the following PDML snippet:</p>
                        <pre class="pml-code"><code>[a  foo   [b]
    2 [c] [d]
]</code></pre>
                        <p class="pml-paragraph">In this example, node <code class="pml-inline-code">a</code> contains 7 child nodes:</p>
                        <ul class="pml-list">
                            <li class="pml-list-element">
                                <p class="pml-paragraph">text <code class="pml-inline-code">{space}foo{space}{space}{space}</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">empty node <code class="pml-inline-code">b</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">text <code class="pml-inline-code">{new line}{space}{space}{space}{space}2{space}</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">empty node <code class="pml-inline-code">c</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">text <code class="pml-inline-code">{space}</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">empty node <code class="pml-inline-code">d</code></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">text <code class="pml-inline-code">{new line}</code></p>
                            </li>
                        </ul>
                        <p class="pml-paragraph">Applications reading PDML documents (or customized PDML parsers) are free to implement any appropriate whitespace handling rules, such as:</p>
                        <ul class="pml-list">
                            <li class="pml-list-element">
                                <p class="pml-paragraph">skip whitespace nodes</p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">trim leading and/or trailing whitespace in text nodes</p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph">replace whitespace sequences with a single space (similar to HTML)</p>
                            </li>
                        </ul>
                    </section>
                    <p class="pml-paragraph"> </p>
                    <section id="ch__9" class="pml-chapter">
                        <h2 class="pml-chapter-title">New Lines</h2>
                        <p class="pml-paragraph">New lines are defined differently in Unix/Linux and Windows. Unix uses a single <i class="pml-italic">line feed</i> (<code class="pml-inline-code">&quot;\n&quot;</code>). Windows uses a <i class="pml-italic">carriage return</i>, followed by a <i class="pml-italic">line feed</i> (<code class="pml-inline-code">&quot;\r\n&quot;</code>).</p>
                        <p class="pml-paragraph">The following rules are applied in PDML:</p>
                        <ul class="pml-list">
                            <li class="pml-list-element">
                                <div class="pml-header">Reading Rule</div>
                                <p class="pml-paragraph">When a PDML document is <i class="pml-italic">read</i>, Unix and Windows new lines are both supported, whether the application runs on Unix or Windows, even if a single document uses a mixture of Unix/Windows new lines.</p>
                                <p class="pml-paragraph">For example, a parser reads <code class="pml-inline-code">&quot;\n&quot;</code> and <code class="pml-inline-code">&quot;\r\n&quot;</code> as a single new line.</p>
                            </li>
                            <li class="pml-list-element">
                                <div class="pml-header">Writing Rule</div>
                                <p class="pml-paragraph">When a PDML document is <i class="pml-italic">written</i>, the operating system's canonical new line is used.</p>
                                <p class="pml-paragraph">For example, a writer running on Unix writes <code class="pml-inline-code">&quot;\n&quot;</code>. On Windows it writes <code class="pml-inline-code">&quot;\r\n&quot;</code>.</p>
                            </li>
                        </ul>
                    </section>
                    <p class="pml-paragraph"> </p>
                    <section id="ch__10" class="pml-chapter">
                        <h2 class="pml-chapter-title">Encoding</h2>
                        <p class="pml-paragraph">PDML documents are encoded in UTF-8.</p>
                    </section>
                    <section id="ch__11" class="pml-chapter">
                        <h2 class="pml-chapter-title">Grammar</h2>
                        <p class="pml-paragraph">The grammar is defined in separate documents, in two variations:</p>
                        <ul class="pml-list">
                            <li class="pml-list-element">
                                <p class="pml-paragraph"><a href="https://pdml-lang.github.io/docs/ebnf/index.html" class="pml-link">Extended Backus–Naur form (EBNF)</a></p>
                            </li>
                            <li class="pml-list-element">
                                <p class="pml-paragraph"><a href="https://pdml-lang.github.io/docs/railroad/index.html" class="pml-link">railroad diagrams</a></p>
                            </li>
                        </ul>
                    </section>
                    <section id="ch__12" class="pml-chapter">
                        <h2 class="pml-chapter-title">Examples</h2>
                        <p class="pml-paragraph">More examples of PDML code can be found in <a href="https://pdml-lang.github.io/docs/examples/index.html" class="pml-link">PDML Examples</a>.</p>
                    </section>
                    <section id="ch__13" class="pml-chapter">
                        <h2 class="pml-chapter-title">Website</h2>
                        <p class="pml-paragraph">PDML's website is <a href="https://pdml-lang.github.io/" class="pml-link">https://pdml-lang.github.io/</a>.</p>
                    </section>
                    <section id="ch__14" class="pml-chapter">
                        <h2 class="pml-chapter-title">Source Code</h2>
                        <p class="pml-paragraph">This document is written in <a href="https://www.pml-lang.dev/" class="pml-link">PML</a> and uses the PDML syntax.</p>
                        <p class="pml-paragraph">The source code is available on <a href="https://github.com/pdml-lang/basic-specification/" class="pml-link">Github</a>.</p>
                        <p class="pml-paragraph">Pull requests are welcome.</p>
                    </section>
                </article>
                <aside class="pml-doc-right">
                </aside>
            </div>
            <footer class="pml-doc-footer">
            </footer>
        </div>

    </body>
</html>
